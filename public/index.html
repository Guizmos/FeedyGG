<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>FeedYGG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="favicon.png" />
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="app">
    <header class="app-header">
      <div class="logo">
        <span class="logo-main">YGG</span>
        <span class="logo-sub">Feed</span>
      </div>

      <div class="controls">
        <div id="filters-container" class="filters-container">
          <button id="search-toggle" class="controls-search-btn" title="Recherche">
            <span class="icon-glyph material-symbols-rounded">search</span>
          </button>

          <label>
            Cat√©gorie:
            <select id="category-select" class="pill-select"></select>
          </label>

          <label>
            R√©sultats:
            <select id="limit-select" class="pill-select">
              <option value="3" selected>3</option>
              <option value="9">9</option>
              <option value="all">Tout</option>
            </select>
          </label>

          <label>
            Tri:
            <select id="sort-select" class="pill-select">
              <option value="seeders" selected>Seeders</option>
              <option value="date">Date d'ajout</option>
              <option value="name">Nom</option>
            </select>
          </label>
        </div>

        <div id="search-container" class="search-container hidden">
          <button id="filters-mini" class="filters-mini" title="Filtres">
            <span class="icon-glyph material-symbols-rounded">tune</span>
          </button>

          <div class="search-input-shell">
            <span class="search-icon icon-glyph material-symbols-rounded">search</span>
            <input
              id="search-input"
              class="search-input"
              type="text"
              placeholder="Rechercher dans les r√©sultats‚Ä¶"
              autocomplete="off"
            />
            <button id="search-clear" class="search-clear-btn" type="button">
              <span class="icon-glyph material-symbols-rounded">close</span>
            </button>
          </div>
        </div>
      </div>

      <div class="header-actions">
        <div class="header-actions-group">
          <button id="refresh-btn" class="header-btn" title="Rafra√Æchir">
            <span class="icon-glyph material-symbols-rounded">refresh</span>
          </button>
          <button id="settings-btn" class="header-btn" title="Param√®tres">
            <span class="icon-glyph material-symbols-rounded">settings</span>
          </button>
        </div>
      </div>
    </header>

    <main class="app-main">
      <div class="stats-bar">
        <div id="stats" class="stats"></div>
        <div id="active-date-filter-chip" class="date-filter-chip hidden"></div>
        <div id="date-filter-panel" class="date-filter-panel hidden"></div>
        <button id="date-filter-btn" class="header-btn date-filter-btn">
          <span class="material-symbols-rounded">filter_alt</span>
        </button>
        <button
          id="sort-direction-btn"
          class="header-btn sort-direction-btn"
          type="button"
          title="Inverser l'ordre du tri">
          <span class="material-symbols-rounded sort-rotate-icon">sync_alt</span>
        </button>
      </div>

      <div id="loading" class="loading hidden">
      </div>
      <div id="error" class="error hidden"></div>
      <div id="empty" class="empty hidden">Aucun r√©sultat.</div>
      <div id="cards"></div>
    </main>

    <footer id="app-footer" class="app-footer">
      <div class="footer-inner">
        <span class="footer-logo">
          <span class="logo-main">YGG</span>
          <span class="logo-sub">Feed</span>
        </span>
        <span class="footer-separator">‚Ä¢</span>
        <span class="footer-text">Tous droits r√©serv√©s</span>
        <span id="app-version" class="footer-version">v0.0.0</span>
      </div>
    </footer>
  </div>

  <div id="settings-overlay" class="settings-overlay hidden"></div>
  <div id="settings-modal" class="settings-modal hidden">
    <h2>Param√®tres</h2>

    <div class="settings-layout">
      <nav class="settings-sidebar">
        <button class="settings-nav-item active" data-section="theme">
          <span class="settings-nav-icon material-symbols-rounded">dark_mode</span>
          <div class="settings-nav-text">
            <span class="settings-nav-label">Apparence</span>
            <span class="settings-nav-sub">Th√®me de l‚Äôinterface</span>
          </div>
        </button>

        <button class="settings-nav-item" data-section="sort">
          <span class="settings-nav-icon material-symbols-rounded">sort</span>
          <div class="settings-nav-text">
            <span class="settings-nav-label">Tri par d√©faut</span>
            <span class="settings-nav-sub">Ordre du flux</span>
          </div>
        </button>

        <button class="settings-nav-item" data-section="date">
          <span class="settings-nav-icon material-symbols-rounded">schedule</span>
          <div class="settings-nav-text">
            <span class="settings-nav-label">Filtre par d√©faut</span>
            <span class="settings-nav-sub">P√©riode appliqu√©e au chargement</span>
          </div>
        </button>

        <button class="settings-nav-item" data-section="refresh">
          <span class="settings-nav-icon material-symbols-rounded">refresh</span>
          <div class="settings-nav-text">
            <span class="settings-nav-label">Rafra√Æchissement</span>
            <span class="settings-nav-sub">Fr√©quence de mise √† jour</span>
          </div>
        </button>

        <button class="settings-nav-item" data-section="logs">
          <span class="settings-nav-icon material-symbols-rounded">list_alt</span>
          <div class="settings-nav-text">
            <span class="settings-nav-label">Logs</span>
            <span class="settings-nav-sub">Historique des op√©rations</span>
          </div>
        </button>

        <button class="settings-nav-item" data-section="purge">
          <span class="settings-nav-icon material-symbols-rounded">delete_forever</span>
          <div class="settings-nav-text">
            <span class="settings-nav-label">Base de donn√©es</span>
            <span class="settings-nav-sub">Dur√©e de conservation des donn√©es</span>
          </div>
        </button>
      </nav>

      <div class="settings-content">
        <section class="settings-section active" data-section="theme">
          <h3 class="settings-section-title">Th√®me</h3>
          <p class="settings-section-desc">
            Choisissez comment l‚Äôinterface s‚Äôadapte au mode clair/sombre.
          </p>

          <div class="settings-row">
            <div class="settings-row-main">
              <span class="settings-icon material-symbols-rounded">dark_mode</span>
              <div class="settings-text">
                <label for="theme-select" class="settings-label">Th√®me</label>
                <div class="settings-subtitle">Choisir l'apparence de l'interface</div>
              </div>
            </div>
            <div class="settings-center">
              <select id="theme-select" class="pill-select">
                <option value="system">Syst√®me</option>
                <option value="light">Clair</option>
                <option value="dark">Sombre</option>
              </select>
            </div>
          </div>

          <div class="settings-row">
            <div class="settings-row-main">
              <span class="settings-icon material-symbols-rounded">view_agenda</span>
              <div class="settings-text">
                <label for="card-size-select" class="settings-label">Affichage</label>
                <div class="settings-subtitle">
                  Ajuster la densit√© d'affichage des r√©sultats
                </div>
              </div>
            </div>
            <div class="settings-center">
              <select id="card-size-select" class="pill-select">
                <option value="compact">Compact</option>
                <option value="normal" selected>Normal</option>
                <option value="large">Large</option>
              </select>
            </div>
          </div>
        </section>

        <section class="settings-section" data-section="sort">
          <h3 class="settings-section-title">Tri par d√©faut</h3>
          <p class="settings-section-desc">
            D√©finit l‚Äôordre utilis√© automatiquement au chargement du flux.
          </p>

          <div class="settings-row">
            <div class="settings-row-main">
              <span class="settings-icon material-symbols-rounded">sort</span>
              <div class="settings-text">
                <label for="default-sort-select" class="settings-label">Tri par d√©faut</label>
                <div class="settings-subtitle">Ordre appliqu√© au chargement du flux</div>
              </div>
            </div>
            <div class="settings-center">
              <select id="default-sort-select" class="pill-select">
                <option value="seeders">Seeders</option>
                <option value="date">Date d'ajout</option>
                <option value="name">Nom</option>
              </select>
            </div>
          </div>
        </section>

        <section class="settings-section" data-section="date">
          <h3 class="settings-section-title">Filtre par d√©faut</h3>
          <p class="settings-section-desc">
            Limite les r√©sultats aux X derniers jours d√®s le chargement.
          </p>

          <div class="settings-row">
            <div class="settings-row-main">
              <div class="settings-icon">
                <span class="material-symbols-rounded">schedule</span>
              </div>
              <div class="settings-text">
                <div class="settings-label">Filtre par d√©faut</div>
                <div class="settings-subtitle">
                  P√©riode appliqu√©e automatiquement au chargement.
                </div>
              </div>
            </div>

            <div class="settings-center">
              <select id="default-date-filter-select" class="pill-select">
                <option value="0">Tout</option>
                <option value="1">24h</option>
                <option value="2">48h</option>
                <option value="3">3 jours</option>
                <option value="7">7 jours</option>
              </select>
            </div>
          </div>
        </section>

        <section class="settings-section" data-section="refresh">
          <h3 class="settings-section-title">Rafra√Æchissement</h3>
          <p class="settings-section-desc">
            D√©termine la fr√©quence de mise √† jour automatique du flux.
          </p>

          <div class="settings-row">
            <div class="settings-row-main">
              <span class="settings-icon material-symbols-rounded">refresh</span>
              <div class="settings-text">
                <label for="refresh-interval-select" class="settings-label">
                  Mode de rafra√Æchissement
                </label>
                <div class="settings-subtitle">
                  Choisissez entre manuel ou un intervalle automatique.
                </div>
              </div>
            </div>

            <div class="settings-center">
              <select id="refresh-interval-select" class="pill-select">
                <option value="manual">Manuel</option>
                <option value="15">15 min</option>
                <option value="30">30 min</option>
                <option value="60">1 h</option>
              </select>
            </div>
          </div>
          <div class="last-sync-row">
            <span class="last-sync-label">Date de la derni√®re synchronisation :</span>
            <span id="last-sync-value" class="last-sync-date">inconnue</span>
          </div>
        </section>

        <section class="settings-section" data-section="logs">
          <h3 class="settings-section-title">Logs</h3>
          <p class="settings-section-desc">
            Consulter l‚Äôhistorique d√©taill√© des op√©rations de synchronisation.
          </p>

          <div class="settings-row">
            <div class="settings-row-main">
              <span class="settings-icon material-symbols-rounded">list_alt</span>
              <div class="settings-text">
                <span class="settings-label">Logs</span>
                <div class="settings-subtitle">Consulter l'historique des op√©rations</div>
              </div>
            </div>
            <div class="settings-center">
              <button id="open-logs" class="btn-logs">Afficher les logs</button>
            </div>
          </div>
        </section>

        <section class="settings-section" data-section="purge">
          <h3 class="settings-section-title">Purge &amp; r√©tention</h3>
          <p class="settings-section-desc">
            Choisissez combien de jours les √©l√©ments sont conserv√©s en base avant d‚Äô√™tre automatiquement supprim√©s.
          </p>

          <div class="settings-row">
            <div class="settings-row-main">
              <span class="settings-icon material-symbols-rounded">delete_forever</span>
              <div class="settings-text">
                <label for="retention-days-select" class="settings-label">
                  Dur√©e de r√©tention
                </label>
                <div class="settings-subtitle">
                  Les √©l√©ments plus anciens seront d√©finitivement supprim√©s.
                </div>
              </div>
            </div>
            <div class="settings-center">
              <select id="retention-days-select" class="pill-select">
                <option value="2">2 jours</option>
                <option value="3">3 jours</option>
                <option value="7">7 jours</option>
                <option value="14">14 jours</option>
                <option value="30">30 jours</option>
              </select>
            </div>
          </div>

          <p class="settings-warning" style="color:#ef4444; margin-top: 12px; font-size: 13px">
            ‚ö†Ô∏è R√©duire la dur√©e de r√©tention peut supprimer imm√©diatement des √©l√©ments plus anciens.
          </p>

          <!-- üîΩ Nouveau bloc : nettoyage des affiches orphelines -->
          <div class="settings-row settings-row-danger">
            <div class="settings-row-main">
              <span class="settings-icon settings-icon-danger material-symbols-rounded">
                image_not_supported
              </span>
              <div class="settings-text">
                <span class="settings-label">Nettoyage des affiches</span>
                <div class="settings-subtitle">
                  Supprime les fichiers d'affiches qui ne sont plus li√©s √† aucun √©l√©ment.
                </div>
              </div>
            </div>
            <div class="settings-center">
              <button id="cleanup-posters-btn" class="btn-clean-posters">
                Nettoyer les affiches
              </button>
            </div>
          </div>

          <p id="cleanup-posters-status" class="settings-hint"></p>
        </section>


      </div>
    </div>

    <div class="settings-footer">
      <button id="close-settings" class="btn-close">Fermer</button>
    </div>
  </div>

  <div id="logs-overlay" class="settings-overlay hidden"></div>
  <div id="logs-modal" class="settings-modal logs-modal hidden">
    <h2>Logs YGGFeed</h2>

    <div id="logs-content" class="logs-content">
      Chargement des logs‚Ä¶
    </div>

    <div class="settings-footer">
      <button id="close-logs" class="btn-close">Fermer</button>
    </div>
  </div>

  <div id="details-overlay" class="settings-overlay hidden"></div>
  <div id="details-modal" class="settings-modal details-modal hidden">
    <div class="details-layout">
      <div class="details-poster-shell">
        <img id="details-poster" class="details-poster" alt="Affiche" />
        <div id="details-poster-fallback" class="details-poster-fallback hidden">
          Affiche
        </div>
      </div>

      <div class="details-content">
        <div class="details-title-row">
          <h2 id="details-title" class="details-title"></h2>
          <button
            id="details-original-toggle"
            class="details-original-toggle hidden"
            type="button"
            title="Afficher le titre original"
          >
            <span class="material-symbols-rounded">info</span>
          </button>
        </div>

        <div id="details-meta" class="details-meta"></div>

        <p id="details-plot" class="details-plot"></p>
        <div id="details-extra" class="details-extra"></div>

        <a
          id="details-imdb-link"
          class="details-imdb-link hidden"
          href="#"
          target="_blank"
          rel="noopener noreferrer"
        >
        </a>
      </div>
    </div>

    <div class="settings-footer details-footer">
      <button id="details-close" class="btn-close">Fermer</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
